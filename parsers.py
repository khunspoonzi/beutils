# ┌────────────────────────────────────────────────────────────────────────────────────┐
# DJANGO REST FRAMEWORK IMPORTS
# └────────────────────────────────────────────────────────────────────────────────────┘

from rest_framework import parsers

# ┌────────────────────────────────────────────────────────────────────────────────────┐
# PROJECT IMPORTS
# └────────────────────────────────────────────────────────────────────────────────────┘

from beutils.cases import snakeify_data


# ┌────────────────────────────────────────────────────────────────────────────────────┐
# JSON SNAKE CASE PARSER
# └────────────────────────────────────────────────────────────────────────────────────┘


class JSONSnakeCaseParser(parsers.JSONParser):

    # ┌────────────────────────────────────────────────────────────────────────────────┐
    # PARSE
    # └────────────────────────────────────────────────────────────────────────────────┘

    def parse(self, stream, *args, **kwargs):

        # Get data
        data = super().parse(stream, *args, **kwargs)

        # Return snakeified data
        return snakeify_data(data)
